<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd"><html xmlns="http://www.w3.org/1999/xhtml"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8" /><title>EmailAuth</title><link href="ocean.css" rel="stylesheet" type="text/css" title="Ocean" /><script src="haddock-util.js" type="text/javascript"></script><script type="text/javascript">//<![CDATA[
window.onload = function () {pageLoad();setSynopsis("mini_EmailAuth.html");};
//]]>
</script></head><body><div id="package-header"><ul class="links" id="page-menu"><li><a href="src/EmailAuth.html">Source</a></li><li><a href="index.html">Contents</a></li><li><a href="doc-index.html">Index</a></li></ul><p class="caption">Snowdrift-0.1.4: Infrastructure for the Snowdrift.coop fundraising site.</p></div><div id="content"><div id="module-header"><table class="info"><tr><th>Safe Haskell</th><td>None</td></tr><tr><th>Language</th><td>Haskell2010</td></tr></table><p class="caption">EmailAuth</p></div><div id="description"><p class="caption">Description</p><div class="doc"><p>This module defines methods needed for the YesodAuthEmail instance for
 App.</p></div></div><div id="synopsis"><p id="control.syn" class="caption expander" onclick="toggleSection('syn')">Synopsis</p><ul id="section.syn" class="hide" onclick="toggleSection('syn')"><li class="src short"><a href="#v:addUnverified">addUnverified</a> :: <a href="../basic-prelude-0.5.1/CorePrelude.html#t:MonadIO">MonadIO</a> m =&gt; <a href="../yesod-auth-1.4.13/Yesod-Auth-Email.html#t:Email">Email</a> -&gt; <a href="../yesod-auth-1.4.13/Yesod-Auth-Email.html#t:VerKey">VerKey</a> -&gt; <a href="../persistent-2.2.4.1/Database-Persist-Sql.html#t:SqlPersistT">SqlPersistT</a> m <a href="Model.html#t:VerifyEmailId">VerifyEmailId</a></li><li class="src short"><a href="#v:getVerifyKey">getVerifyKey</a> :: <a href="../basic-prelude-0.5.1/CorePrelude.html#t:MonadIO">MonadIO</a> m =&gt; <a href="Model.html#t:VerifyEmailId">VerifyEmailId</a> -&gt; <a href="../persistent-2.2.4.1/Database-Persist-Sql.html#t:SqlPersistT">SqlPersistT</a> m (<a href="../base-4.8.2.0/Data-Maybe.html#t:Maybe">Maybe</a> <a href="../yesod-auth-1.4.13/Yesod-Auth-Email.html#t:VerKey">VerKey</a>)</li><li class="src short"><a href="#v:setVerifyKey">setVerifyKey</a> :: <a href="../basic-prelude-0.5.1/CorePrelude.html#t:MonadIO">MonadIO</a> m =&gt; <a href="Model.html#t:VerifyEmailId">VerifyEmailId</a> -&gt; <a href="../yesod-auth-1.4.13/Yesod-Auth-Email.html#t:VerKey">VerKey</a> -&gt; <a href="../persistent-2.2.4.1/Database-Persist-Sql.html#t:SqlPersistT">SqlPersistT</a> m ()</li><li class="src short"><a href="#v:verifyAccount">verifyAccount</a> :: <a href="../basic-prelude-0.5.1/CorePrelude.html#t:MonadIO">MonadIO</a> m =&gt; <a href="Model.html#t:VerifyEmailId">VerifyEmailId</a> -&gt; <a href="../persistent-2.2.4.1/Database-Persist-Sql.html#t:SqlPersistT">SqlPersistT</a> m (<a href="../base-4.8.2.0/Data-Maybe.html#t:Maybe">Maybe</a> <a href="Model.html#t:UserId">UserId</a>)</li><li class="src short"><a href="#v:getPassword">getPassword</a> :: <a href="../basic-prelude-0.5.1/CorePrelude.html#t:MonadIO">MonadIO</a> m =&gt; <a href="Model.html#t:UserId">UserId</a> -&gt; <a href="../persistent-2.2.4.1/Database-Persist-Sql.html#t:SqlPersistT">SqlPersistT</a> m (<a href="../base-4.8.2.0/Data-Maybe.html#t:Maybe">Maybe</a> <a href="../basic-prelude-0.5.1/CorePrelude.html#t:Text">Text</a>)</li><li class="src short"><a href="#v:setPassword">setPassword</a> :: <a href="../basic-prelude-0.5.1/CorePrelude.html#t:MonadIO">MonadIO</a> m =&gt; <a href="Model.html#t:UserId">UserId</a> -&gt; <a href="../yesod-auth-1.4.13/Yesod-Auth-Email.html#t:SaltedPass">SaltedPass</a> -&gt; <a href="../persistent-2.2.4.1/Database-Persist-Sql.html#t:SqlPersistT">SqlPersistT</a> m ()</li><li class="src short"><a href="#v:getEmailCreds">getEmailCreds</a> :: (<a href="../basic-prelude-0.5.1/CorePrelude.html#t:MonadIO">MonadIO</a> m, <a href="../yesod-auth-1.4.13/Yesod-Auth-Email.html#t:AuthEmailId">AuthEmailId</a> site ~ <a href="../persistent-2.2.4.1/Database-Persist-Class.html#t:Key">Key</a> <a href="Model.html#t:VerifyEmail">VerifyEmail</a>, <a href="../yesod-auth-1.4.13/Yesod-Auth.html#t:AuthId">AuthId</a> site ~ <a href="../persistent-2.2.4.1/Database-Persist-Class.html#t:Key">Key</a> <a href="Model.html#t:User">User</a>) =&gt; <a href="../basic-prelude-0.5.1/CorePrelude.html#t:Text">Text</a> -&gt; <a href="../persistent-2.2.4.1/Database-Persist-Sql.html#t:SqlPersistT">SqlPersistT</a> m (<a href="../base-4.8.2.0/Data-Maybe.html#t:Maybe">Maybe</a> (<a href="../yesod-auth-1.4.13/Yesod-Auth-Email.html#t:EmailCreds">EmailCreds</a> site))</li><li class="src short"><a href="#v:getEmail">getEmail</a> :: <a href="../basic-prelude-0.5.1/CorePrelude.html#t:MonadIO">MonadIO</a> m =&gt; <a href="Model.html#t:VerifyEmailId">VerifyEmailId</a> -&gt; <a href="../persistent-2.2.4.1/Database-Persist-Sql.html#t:SqlPersistT">SqlPersistT</a> m (<a href="../base-4.8.2.0/Data-Maybe.html#t:Maybe">Maybe</a> <a href="../yesod-auth-1.4.13/Yesod-Auth-Email.html#t:Email">Email</a>)</li></ul></div><div id="interface"><h1>Documentation</h1><div class="top"><p class="src"><a name="v:addUnverified" class="def">addUnverified</a> :: <a href="../basic-prelude-0.5.1/CorePrelude.html#t:MonadIO">MonadIO</a> m =&gt; <a href="../yesod-auth-1.4.13/Yesod-Auth-Email.html#t:Email">Email</a> -&gt; <a href="../yesod-auth-1.4.13/Yesod-Auth-Email.html#t:VerKey">VerKey</a> -&gt; <a href="../persistent-2.2.4.1/Database-Persist-Sql.html#t:SqlPersistT">SqlPersistT</a> m <a href="Model.html#t:VerifyEmailId">VerifyEmailId</a> <a href="src/EmailAuth.html#addUnverified" class="link">Source</a></p><div class="doc"><p>Add a new, unverified user. Uniqueness guarantees this blows up
 if the user already exists.</p></div></div><div class="top"><p class="src"><a name="v:getVerifyKey" class="def">getVerifyKey</a> :: <a href="../basic-prelude-0.5.1/CorePrelude.html#t:MonadIO">MonadIO</a> m =&gt; <a href="Model.html#t:VerifyEmailId">VerifyEmailId</a> -&gt; <a href="../persistent-2.2.4.1/Database-Persist-Sql.html#t:SqlPersistT">SqlPersistT</a> m (<a href="../base-4.8.2.0/Data-Maybe.html#t:Maybe">Maybe</a> <a href="../yesod-auth-1.4.13/Yesod-Auth-Email.html#t:VerKey">VerKey</a>) <a href="src/EmailAuth.html#getVerifyKey" class="link">Source</a></p></div><div class="top"><p class="src"><a name="v:setVerifyKey" class="def">setVerifyKey</a> :: <a href="../basic-prelude-0.5.1/CorePrelude.html#t:MonadIO">MonadIO</a> m =&gt; <a href="Model.html#t:VerifyEmailId">VerifyEmailId</a> -&gt; <a href="../yesod-auth-1.4.13/Yesod-Auth-Email.html#t:VerKey">VerKey</a> -&gt; <a href="../persistent-2.2.4.1/Database-Persist-Sql.html#t:SqlPersistT">SqlPersistT</a> m () <a href="src/EmailAuth.html#setVerifyKey" class="link">Source</a></p></div><div class="top"><p class="src"><a name="v:verifyAccount" class="def">verifyAccount</a> :: <a href="../basic-prelude-0.5.1/CorePrelude.html#t:MonadIO">MonadIO</a> m =&gt; <a href="Model.html#t:VerifyEmailId">VerifyEmailId</a> -&gt; <a href="../persistent-2.2.4.1/Database-Persist-Sql.html#t:SqlPersistT">SqlPersistT</a> m (<a href="../base-4.8.2.0/Data-Maybe.html#t:Maybe">Maybe</a> <a href="Model.html#t:UserId">UserId</a>) <a href="src/EmailAuth.html#verifyAccount" class="link">Source</a></p></div><div class="top"><p class="src"><a name="v:getPassword" class="def">getPassword</a> :: <a href="../basic-prelude-0.5.1/CorePrelude.html#t:MonadIO">MonadIO</a> m =&gt; <a href="Model.html#t:UserId">UserId</a> -&gt; <a href="../persistent-2.2.4.1/Database-Persist-Sql.html#t:SqlPersistT">SqlPersistT</a> m (<a href="../base-4.8.2.0/Data-Maybe.html#t:Maybe">Maybe</a> <a href="../basic-prelude-0.5.1/CorePrelude.html#t:Text">Text</a>) <a href="src/EmailAuth.html#getPassword" class="link">Source</a></p></div><div class="top"><p class="src"><a name="v:setPassword" class="def">setPassword</a> :: <a href="../basic-prelude-0.5.1/CorePrelude.html#t:MonadIO">MonadIO</a> m =&gt; <a href="Model.html#t:UserId">UserId</a> -&gt; <a href="../yesod-auth-1.4.13/Yesod-Auth-Email.html#t:SaltedPass">SaltedPass</a> -&gt; <a href="../persistent-2.2.4.1/Database-Persist-Sql.html#t:SqlPersistT">SqlPersistT</a> m () <a href="src/EmailAuth.html#setPassword" class="link">Source</a></p></div><div class="top"><p class="src"><a name="v:getEmailCreds" class="def">getEmailCreds</a> :: (<a href="../basic-prelude-0.5.1/CorePrelude.html#t:MonadIO">MonadIO</a> m, <a href="../yesod-auth-1.4.13/Yesod-Auth-Email.html#t:AuthEmailId">AuthEmailId</a> site ~ <a href="../persistent-2.2.4.1/Database-Persist-Class.html#t:Key">Key</a> <a href="Model.html#t:VerifyEmail">VerifyEmail</a>, <a href="../yesod-auth-1.4.13/Yesod-Auth.html#t:AuthId">AuthId</a> site ~ <a href="../persistent-2.2.4.1/Database-Persist-Class.html#t:Key">Key</a> <a href="Model.html#t:User">User</a>) =&gt; <a href="../basic-prelude-0.5.1/CorePrelude.html#t:Text">Text</a> -&gt; <a href="../persistent-2.2.4.1/Database-Persist-Sql.html#t:SqlPersistT">SqlPersistT</a> m (<a href="../base-4.8.2.0/Data-Maybe.html#t:Maybe">Maybe</a> (<a href="../yesod-auth-1.4.13/Yesod-Auth-Email.html#t:EmailCreds">EmailCreds</a> site)) <a href="src/EmailAuth.html#getEmailCreds" class="link">Source</a></p><div class="doc"><p>Since we only use email for identification, this function is
 degenerate in a few ways.</p></div></div><div class="top"><p class="src"><a name="v:getEmail" class="def">getEmail</a> :: <a href="../basic-prelude-0.5.1/CorePrelude.html#t:MonadIO">MonadIO</a> m =&gt; <a href="Model.html#t:VerifyEmailId">VerifyEmailId</a> -&gt; <a href="../persistent-2.2.4.1/Database-Persist-Sql.html#t:SqlPersistT">SqlPersistT</a> m (<a href="../base-4.8.2.0/Data-Maybe.html#t:Maybe">Maybe</a> <a href="../yesod-auth-1.4.13/Yesod-Auth-Email.html#t:Email">Email</a>) <a href="src/EmailAuth.html#getEmail" class="link">Source</a></p></div></div></div><div id="footer"><p>Produced by <a href="http://www.haskell.org/haddock/">Haddock</a> version 2.16.1</p></div></body></html>